---
title: Evtx
description: 이벤트 로그
published: true
date: 2022-11-27T14:04:33.186Z
tags: 
editor: markdown
dateCreated: 2022-10-11T10:11:25.940Z
---

# Windows 이벤트 로그
Windows 이벤트 로그는 Windows OS 동작 과정에서 발생하는 특정 이벤트들을 로그형식으로 기록한 데이터입니다. 데이터는 XML 기반의 이벤트 로그 포맷을 가지고 있습니다. 이벤트 로그는 각각 이벤트 ID가 존재하며, "이벤트 뷰어(Event Viewer)"를 통해 원하는 정보를 ID를 통해 쉽게 확인이 가능합니다.

## 아티팩트 분석목표
분석자는 해당 아티팩트를 분석하여 네트워크 관련 정보(포트 연결, 원격 접속 등), 계정 정보, 컴퓨터 활동 정보(부팅 시각과 종료 시각 등), 응용 프로그램 사용 정보, 장치 연결 정보 등을 알 수 있습니다.


## 이벤트 로그의 필요성
이벤트 로그는 Windows 시스템에서 발생하는 문제들의 단서를 얻어 문제를 파악할 수 있습니다. 장애, 침애사고 등이 발생한다면 로그의 정보를 통해서 분석 자료로 활용이 가능합니다.

## 이벤트 로그 경로
- C:\Windows\System32\winevt\Logs: 
Security, Setup, Application, DNS Server, Hardware Event, PowerShell, System 등의 이벤트 로그가 저장되어 있는 위치입니다.
![이벤트로그5.png](/이벤트로그/이벤트로그5.png)
- C:\Windows\winsxs: 
윈도우 업데이트 패치 파일이 저장되어 있는 위치입니다.
![이벤트로그위치4.png](/이벤트로그/이벤트로그위치4.png)

## 이벤트 뷰어 사용법
Windows OS에서 제공하는 이벤트 뷰어를 통해 이벤트 로그를 확인이 가능합니다.
1. "Windows 로고 키 + R"을 통해 실행창을 켜고, "eventvwr"을 입력하고 확인을 클릭합니다.
![이벤트뷰어실행방법.png](/이벤트로그/이벤트뷰어실행방법.png)

2. 이벤트 뷰어가 실행됩니다.
![이벤트뷰어메인.png](/이벤트로그/이벤트뷰어메인.png)


## 이벤트 뷰어 구조
이벤트 뷰어 구조는 "Windows 로그", "응용 프로그램 및 서비스 로그", "저장된 로그" 등으로 이루어져 있습니다.
- Windows 로그: 응용 프로그램, 보안, Setup, 시스템, Forwarded Events로 이루어져 있습니다. 핵심적인 이벤트 로그 정보는 다음과 같습니다.

|**이벤트 로그**       				|**설명**|
|-|-|
|응용 프로그램|응용 프로그램이 기록한 이벤트가 저장됩니다. 기록되는 이벤트는 해당 제품의 개발자에 의해 결정됩니다.|
|보안 |유효하거나 유효하지 않은 로그온 시도 및 파일 생성, 열람, 삭제 등의 리소스 사용에 관련된 이벤트를 기록합니다. **감사로그 설정을 통해 다양한 보안 이벤트 저장이 가능**합니다.|
|Setup|Windows 설치 프로그램은 설치 중에 발생하는 모든 작업에 대한 로그 파일을 만듭니다. 이를 통해 Windows 설치 프로그램 중에 발생한 작업을 보다 쉽게 검토할 수 있습니다.|
|시스템|Windows 시스템 구성요소가 기록되는 이벤트로 시스템 부팅 시, 드라이버가 로드되지 않는 경우와 같이 구성요소의 오류를 이벤트에 기록합니다.|
|Forwarded Events|이벤트 가입을 통해 원격 컴퓨터에서 수집한 이베트를 저장하는데 사용합니다.|

- 응용 프로그램 및 서비스 로그: Windows Vista 이후에 추가된 로그 목록입니다. 
- 저장된 로그: 사용자가 임의로 저장한 로그가 저장됩니다.

## 이벤트 로그 구성
- 이벤트 엔트리 헤더

|**이름**|**설명**|
|-|-|
|날짜|이벤트 발생 날짜|
|시간|이벤트 발생 시간|
|사용자|이벤트 발생하였을 때 로그온 되어 있는 사용자의 이름|
|컴퓨터|이벤트가 발생한 컴퓨터의 이름|
|이벤트 ID|이벤트 ID를 통해 어떤 이벤트가 발생하였는지 식별|
|원본|프로그램, 시스템 구성요소 또는 큰 프로그램의 개별 구성 요소에 대한 이름|
|종류|오류, 경고, 정보, 성공감사, 실패감사 중 하나|
|범주|이벤트 원본에 따른 이벤트 분류이며, 보안 로그에 주로 사용|



- 이벤트 종류

|**이름**|**설명**|
|-|-|
|정보|응용 프로그램, 드라이버 또는 서비스와 같은 작업의 성공적인 작동을 설명하는 이벤트|
|경고|매우 중요하지는 않으나 앞으로 문제가 발생할 가능성이 있음을 나타내는 이벤트|
|오류|중요한 작업의 실패와 같이 문제를 설명하는 이벤트로 데이터 손실이나 기능 손실을 포함하는 이벤트|
|성공감사|보안 이벤트의 성공적인 감사 완료를 설명하는 이벤트|
|실패감사|보안 이벤트 감사가 완료되지 않았음을 설명하는 이벤트|


## 이벤트 로그 특징
- Windows OS 버전 별 로그 특징

|				|Windows 2000/XP/2003|Windows Vista/2008/7|
|-|-|-|
|주요 로깅 데이터|System, Security, Application|System, Security, Application
|로그 저장 형태|Binary|Binary, XML|
|로그 확장자명|.evt|.evtx|
|저장 경로|\Windows\System32\Config|\Windows\System32\winevt\Logs|


- 최대 이벤트 로그 크기
사용자가 정의한 64에서 4,194,240 사이의 값(KB)으로 64의 배수

- 이벤트 로그 자동 삭제
이벤트 로그의 용량이 다 찬다면 컴퓨터에서 최신 항목이 가장 오래된 항목을 덮어쓰도록 설정되어 있습니다. 만약 최신 데이터가 손실되지 않게 하고 싶다면 덮어쓰기 보관 방식을 설정하면 됩니다. 만약 덮어쓰기 되거나 삭제된 로그는 복구 가능성은 있지만 사용 가능한 데이터를 살려낼 가능성은 상당히 희박합니다.

- 로컬 보안 정책
로컬 보안 정책을 이용하면 이벤트 로그 기록 관련 정책을 편집할 수 있습니다.
참고링크: https://learn.microsoft.com/ko-kr/windows/security/threat-protection/auditing/basic-audit-logon-events
